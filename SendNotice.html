<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Official Property Tax Notice</title>
<style>
    body {
        font-family: 'Times New Roman', serif;
        background-color: #fff;
        margin: 40px;
        color: #2C3E50;
        line-height: 1.6;
    }
    .letter-container {
        max-width: 700px;
        margin: auto;
        padding: 25px;
        border: 1px solid #ccc;
        border-radius: 10px;
    }
    h2 {
        text-align: center;
        color: #C0392B;
        margin-bottom: 20px;
    }
    p { margin: 10px 0; }
    ul { margin-left: 20px; }
    .footer {
        margin-top: 40px;
    }
    .highlight {
        font-weight: bold;
    }
</style>
</head>
<body>

<div class="letter-container">
    <h2>üèõ Official Property Tax Notice</h2>

    <p><span class="highlight">To:</span> The Property Owner / Authorized Representative</p>
    <p><span class="highlight">Building ID:</span> <span id="bID"></span></p>
    <p><span class="highlight">Date:</span> <span id="currentDate"></span></p>

    <p>Dear Sir/Madam,</p>

    <!-- Main notice paragraph -->
    <p id="noticeText"></p>

    <p><b>Property Details:</b></p>
    <ul>
        <li><b>Owner:</b> <span id="owner"></span></li>
        <li><b>Property Use:</b> <span id="useType"></span></li>
        <li><b>Carpet Area:</b> <span id="carpet"></span> sq.m</li>
    </ul>

    <p><b>Outstanding Amount:</b></p>
    <ul>
        <li><b>Total Floor Tax:</b> ‚Çπ<span id="totalTax"></span></li>
    </ul>

    <p><b>Instructions:</b></p>
    <ul id="instructions"></ul>

    <p id="closing"></p>

    <div class="footer">
        <p>Sincerely,</p>
        <p><b>Property Tax Collection Officer</b><br>Municipal Corporation</p>
    </div>
</div>

<script>
    // Read URL parameters from Arcade pop-up
    const urlParams = new URLSearchParams(window.location.search);
    const bID = urlParams.get('building') || "N/A";
    const owner = urlParams.get('owner') || "N/A";
    const useType = urlParams.get('use') || "N/A";
    const carpet = urlParams.get('carpet') || "0";
    const totalTax = urlParams.get('tax') || "0";
    const status = urlParams.get('status') || "Unpaid"; // Payment status passed from Arcade

    // Populate static fields
    document.getElementById("bID").innerText = bID;
    document.getElementById("owner").innerText = owner;
    document.getElementById("useType").innerText = useType;
    document.getElementById("carpet").innerText = carpet;
    document.getElementById("totalTax").innerText = totalTax;

    // Current date
    const today = new Date();
    const dd = String(today.getDate()).padStart(2, '0');
    const mm = String(today.getMonth() + 1).padStart(2, '0');
    const yyyy = today.getFullYear();
    document.getElementById("currentDate").innerText = dd + '/' + mm + '/' + yyyy;

    // Fiscal year
    const fiscalYear = yyyy;

    // Dynamic content based on Payment Status
    const noticeTextEl = document.getElementById("noticeText");
    const instructionsEl = document.getElementById("instructions");
    const closingEl = document.getElementById("closing");

    if (status === "Unpaid") {
        noticeTextEl.innerHTML = 
            `This is an official notice from the Municipal Corporation regarding the <b>outstanding property tax</b> for your property. Our records indicate that the payment for the fiscal year ${fiscalYear} has <span style="color:red; font-weight:bold;">Not Paid</span>.`;

        instructionsEl.innerHTML = `
            <li>Kindly remit the outstanding amount at the earliest to avoid additional penalties or legal proceedings.</li>
            <li>Payment can be made at the Municipal Corporation office or through the official online property tax portal.</li>
            <li>For any queries, contact the Property Tax Department at <b>official@gov.in</b>.</li>
        `;

        closingEl.innerText = "Please treat this matter with urgency. Non-payment may result in further administrative action in accordance with municipal regulations.";

    } else if (status === "Partially Paid") {
        noticeTextEl.innerHTML = 
            `This is an official notice from the Municipal Corporation regarding the <b>partial payment of property tax</b> for your property. Our records indicate that for the fiscal year ${fiscalYear}, the payment status is <span style="color:orange; font-weight:bold;">Partially Paid</span>.`;

        instructionsEl.innerHTML = `
            <li>Please settle the remaining balance immediately to avoid penalties or legal proceedings.</li>
            <li>You may verify the balance on the official property tax portal or visit the Municipal Corporation office.</li>
            <li>For assistance, contact the Property Tax Department at <b>official@gov.in</b>.</li>
        `;

        closingEl.innerText = "We request your cooperation in clearing the remaining dues promptly to avoid further action.";
    }
</script>

</body>
</html>
