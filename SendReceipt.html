<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Property Tax Bill / Receipt</title>
<style>
    body {
        font-family: "Arial", Helvetica, sans-serif;
        background-color: #ffffff;
        margin: 0;
        padding: 20px;
    }
    .bill-wrapper {
        max-width: 800px;
        margin: 0 auto;
        border: 1px solid #d0d0d0;
        padding: 15px 20px 5px 20px;
        box-sizing: border-box;
    }
    .amc-header {
        display: flex;
        align-items: center;
        border-bottom: 1px solid #d0d0d0;
        padding-bottom: 8px;
        margin-bottom: 8px;
    }
    .amc-logo {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: 1px solid #c0c0c0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
    }
    .amc-title {
        flex: 1;
        text-align: center;
    }
    .amc-title-main {
        font-size: 18px;
        font-weight: bold;
        color: #c5362a;
        text-transform: uppercase;
    }
    .amc-title-sub {
        font-size: 13px;
        font-weight: bold;
        margin-top: 3px;
    }
    .bill-info-box {
        width: 180px;
        font-size: 11px;
        border-left: 1px solid #d0d0d0;
        padding-left: 8px;
    }
    .bill-info-row {
        display: flex;
        justify-content: space-between;
        padding: 2px 0;
    }
    .bill-info-label {
        background:#f9a76b;
        padding: 2px 4px;
        font-weight:bold;
    }
    .bill-info-value {
        padding: 2px 4px;
    }

    .section-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 11px;
        margin-top: 6px;
    }
    .section-table td {
        padding: 3px 4px;
        border: 1px solid #e0e0e0;
    }
    .section-title-row td {
        background-color: #f9a76b;
        font-weight: bold;
    }
    .label-cell {
        font-weight: bold;
        width: 140px;
    }

    .tax-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 11px;
        margin-top: 10px;
    }
    .tax-table th,
    .tax-table td {
        border: 1px solid #e0e0e0;
        padding: 4px 5px;
        text-align: right;
    }
    .tax-table th {
        background-color: #f9a76b;
        text-align: center;
    }
    .tax-head-col {
        text-align: left;
        width: 40%;
    }
    .total-row td {
        font-weight: bold;
    }
    .net-row td {
        font-weight: bold;
        background-color: #ffe4e4;
    }

    .bottom-note {
        margin-top: 18px;
        font-size: 10px;
        border-top: 1px solid #d0d0d0;
        padding-top: 5px;
        display: flex;
        justify-content: space-between;
    }
</style>
</head>
<body>

<div class="bill-wrapper">
    <!-- HEADER -->
   <div class="amc-header">
    <div class="amc-logo">
        <img 
             alt="AMC Logo"
             style="width:70px;height:70px;object-fit:contain;">
    </div>

    <div class="amc-title">
        <div class="amc-title-main">AHMEDABAD MUNICIPAL CORPORATION</div>
        <div class="amc-title-sub">MAHANAGAR SEWA SADAN</div>
    </div>

    <div class="bill-info-box">
        <div class="bill-info-row">
            <span class="bill-info-label">BILLING YEAR</span>
            <span class="bill-info-value" id="billingYear"></span>
        </div>
        <div class="bill-info-row">
            <span class="bill-info-label">BILL DATE</span>
            <span class="bill-info-value" id="billDate"></span>
        </div>
        <div class="bill-info-row">
            <span class="bill-info-label">DUE DATE</span>
            <span class="bill-info-value" id="dueDate"></span>
        </div>
        <div class="bill-info-row">
            <span class="bill-info-label">STATUS</span>
            <span class="bill-info-value" id="payStatus"></span>
        </div>
    </div>
</div>


    <!-- OWNER / ADDRESS -->
    <table class="section-table">
        <tr class="section-title-row">
            <td colspan="2">OWNER DETAILS</td>
        </tr>
        <tr>
            <td class="label-cell">OWNER(S) NAME</td>
            <td id="ownerName"></td>
        </tr>
        <tr>
            <td class="label-cell">POSTAL ADDRESS</td>
            <td id="postalAddress"></td>
        </tr>
        <tr>
            <td class="label-cell">EMAIL</td>
            <td id="email"></td>
        </tr>
        <tr>
            <td class="label-cell">PHONE</td>
            <td id="phone"></td>
        </tr>
    </table>

    <!-- PROPERTY DETAILS (only fields we have) -->
    <table class="section-table">
        <tr class="section-title-row">
            <td colspan="4">PROPERTY DETAILS</td>
        </tr>
        <tr>
            <td class="label-cell">SOCIETY NAME</td>
            <td id="societyName"></td>
            <td class="label-cell">UNIT / FLAT NO.</td>
            <td id="unitNo"></td>
        </tr>
        <tr>
            <td class="label-cell">DWELLING ID</td>
            <td id="dwellingId"></td>
            <td class="label-cell">USAGE</td>
            <td id="usageDesc"></td>
        </tr>
        <tr>
            <td class="label-cell">CONSTRUCTION YEAR</td>
            <td id="cnstrYear"></td>
            <td class="label-cell">CARPET AREA (Sq.m)</td>
            <td id="carpetArea"></td>
        </tr>
    </table>

    <!-- TAX HEADS -->
    <table class="tax-table">
        <thead>
            <tr>
                <th class="tax-head-col">TAX HEADS</th>
                <th>ARREARS</th>
                <th>CURRENT</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="tax-head-col">PROPERTY TAX</td>
                <td>0.00</td>
                <td id="propertyTax"></td>
            </tr>
            <tr>
                <td class="tax-head-col">WATER TAX</td>
                <td>0.00</td>
                <td id="waterTax"></td>
            </tr>
            <tr>
                <td class="tax-head-col">CONSERVANCY TAX</td>
                <td>0.00</td>
                <td id="conservancyTax"></td>
            </tr>
            <tr>
                <td class="tax-head-col">USAGE CHARGE</td>
                <td>0.00</td>
                <td id="usageCharge"></td>
            </tr>
            <tr>
                <td class="tax-head-col">EDUCATION CESS</td>
                <td>0.00</td>
                <td id="educationCess"></td>
            </tr>
            <tr>
                <td class="tax-head-col">EIC CHARGE</td>
                <td>0.00</td>
                <td id="eicCharge">0.00</td>
            </tr>
            <tr>
                <td class="tax-head-col">INTEREST</td>
                <td>0.00</td>
                <td id="interestAmt">0.00</td>
            </tr>
            <tr class="total-row">
                <td class="tax-head-col">TOTAL PAYABLE TAX</td>
                <td>0.00</td>
                <td id="totalTax"></td>
            </tr>
            <tr class="net-row">
                <td class="tax-head-col">NET PAYABLE AMOUNT</td>
                <td colspan="2" id="netPayable"></td>
            </tr>
        </tbody>
    </table>

    <!-- FOOTER NOTE -->
    <div class="bottom-note">
        <div>NOTE: This is computer generated print, hence no signature required.</div>
        <div id="printDateTime"></div>
    </div>
</div>

<script>
    const p = new URLSearchParams(window.location.search);

    // ---- BASIC FIELDS FROM URL ----
    const owner    = p.get("owner")      || "N/A";
    const address  = p.get("address")    || "N/A";
    const email    = p.get("email")      || "N/A";
    const phone    = p.get("phone")      || "N/A";
    const society  = p.get("society")    || "";     // Galaxy Tower
    const unitNo   = p.get("unitNo")     || "";     // 2
    const dwelling = p.get("dwellingId") || "";     // PAL-R-091_F03-2
    const usage    = p.get("usage")      || "Residential";
    const cnYear   = p.get("cnstrYear")  || "";     // 2013
    const carpet   = p.get("carpet")     || "0";    // 278.85

    const genTax   = parseFloat(p.get("genTax")   || "0"); // General_Ta
    const waterTax = parseFloat(p.get("waterTax") || "0"); // Water_Tax
    const consTax  = parseFloat(p.get("consTax")  || "0"); // Conservanc
    const eduCess  = parseFloat(p.get("eduCess")  || "0"); // Edu_Cess
    const usageCh  = parseFloat(p.get("usageCharge") || "0"); // Usage_Char
    const totTax   = parseFloat(p.get("totalTax") || "0"); // Tot_Tax
    const status   = p.get("status") || "Paid";

    function fmt(val) {
        return val.toFixed(2);
    }

    // ---- OWNER / PROPERTY DETAILS ----
    document.getElementById("ownerName").innerText    = owner;
    document.getElementById("postalAddress").innerText= address;
    document.getElementById("email").innerText        = email;
    document.getElementById("phone").innerText        = phone;
    document.getElementById("societyName").innerText  = society;
    document.getElementById("unitNo").innerText       = unitNo;
    document.getElementById("dwellingId").innerText   = dwelling;
    document.getElementById("usageDesc").innerText    = usage;
    document.getElementById("cnstrYear").innerText    = cnYear;
    document.getElementById("carpetArea").innerText   = carpet;

    // ---- TAX VALUES ----
    document.getElementById("propertyTax").innerText   = fmt(genTax);
    document.getElementById("waterTax").innerText      = fmt(waterTax);
    document.getElementById("conservancyTax").innerText= fmt(consTax);
    document.getElementById("usageCharge").innerText   = fmt(usageCh);
    document.getElementById("educationCess").innerText = fmt(eduCess);
    document.getElementById("totalTax").innerText      = fmt(totTax);
    document.getElementById("netPayable").innerText    = fmt(totTax);

    // ---- BILLING YEAR, DATES, STATUS ----
    const today = new Date();
    const dd = String(today.getDate()).padStart(2, "0");
    const mm = String(today.getMonth() + 1).padStart(2, "0");
    const yyyy = today.getFullYear();

    // simple Indian FY logic: FY 2024-25 etc.
    let fyStartYear = (today.getMonth() + 1) >= 4 ? yyyy : yyyy - 1;
    const fyStr = fyStartYear + "-" + String(fyStartYear + 1).slice(-2);

    document.getElementById("billingYear").innerText = fyStr;
    document.getElementById("billDate").innerText    = dd + "-" + mm + "-" + yyyy;

    // due date = +30 days
    const due = new Date(today);
    due.setDate(due.getDate() + 30);
    const dd2 = String(due.getDate()).padStart(2, "0");
    const mm2 = String(due.getMonth() + 1).padStart(2, "0");
    const yyyy2 = due.getFullYear();
    document.getElementById("dueDate").innerText = dd2 + "-" + mm2 + "-" + yyyy2;

    document.getElementById("payStatus").innerText = status;

    // footer datetime
    document.getElementById("printDateTime").innerText =
        dd + "-" + mm + "-" + yyyy + "  " + today.toLocaleTimeString("en-IN", {hour: "2-digit", minute:"2-digit"});

</script>
</body>
</html>
